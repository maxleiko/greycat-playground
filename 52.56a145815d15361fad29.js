(self.webpackJsonp=self.webpackJsonp||[]).push([[52],{298:
/*!*************************************************************!*\
  !*** ../greycat-lang-monaco/dist/esm/gcMode.js + 2 modules ***!
  \*************************************************************/
/*! exports provided: setupMode */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with /home/leiko/dev/datathings/greycat/js/node_modules/vscode-languageserver-types/lib/esm/main.js */function(e,t,n){"use strict";n.r(t);var r=function(){function e(e){var t=this;this._defaults=e,this._worker=null,this._idleCheckInterval=setInterval(function(){return t._checkIfIdle()},3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(function(){return t._stopWorker()})}return e.prototype.dispose=function(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()},e.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},e.prototype._checkIfIdle=function(){this._worker&&(Date.now()-this._lastUsedTime>12e4&&this._stopWorker())},e.prototype._getClient=function(){return this._lastUsedTime=Date.now(),this._client||(this._worker=monaco.editor.createWebWorker({moduleId:"greycat.worker",label:this._defaults.languageId,createData:{languageId:this._defaults.languageId,languageSettings:this._defaults.settings,types:this._defaults.gcTypes,functions:this._defaults.gcFunctions}}),this._client=this._worker.getProxy()),this._client},e.prototype.getLanguageServiceWorker=function(){for(var e,t,n,r,o,i=this,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return t=this._getClient().then(function(t){return e=t}).then(function(){i._worker&&i._worker.withSyncedResources(s)}).then(function(){return e}),n=function(){},r=function(){},o=new monaco.Promise(function(e,t){n=e,r=t},function(){}),t.then(n,r),o},e}();var o=n(31),i=monaco.Range,s={defaultToken:"invalid",keywords:["type","function","var","new","return","null","this","false","true","foreach","static","private","if","then","else"],typeKeywords:["string","string_array","int","bool","long","double","long_array","node","node_array","int_array","ulong","ulong_array","reference"],operators:["!","=","#","==","!=","<=",">="],symbols:/[;~!@#%\^&*-+=|\\:`<>.?\/]+/,escapes:/\\(?:[btnfr\\"']|[0-7][0-7]?|[0-3][0-7]{2})/,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"(",close:")",token:"delimiter.paren"},{open:"[",close:"]",token:"delimiter.square"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],[/#[\w$]*/,"hash.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/\d+/,"number"],[/[,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],[/\\*\//,"comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}},a=function(){function e(e,t){var n=this;this._languageId=e,this._worker=t,this._disposables=[],this._listener={};var r=function(e){var t,r=e.getModeId();r===n._languageId&&(n._listener[e.uri.toString()]=e.onDidChangeContent(function(){clearTimeout(t),t=setTimeout(function(){return n._doValidate(e.uri,r)},500)}),n._doValidate(e.uri,r))},o=function(e){monaco.editor.setModelMarkers(e,n._languageId,[]);var t=e.uri.toString(),r=n._listener[t];r&&(r.dispose(),delete n._listener[t])};this._disposables.push(monaco.editor.onDidCreateModel(r)),this._disposables.push(monaco.editor.onWillDisposeModel(o)),this._disposables.push(monaco.editor.onDidChangeModelLanguage(function(e){o(e.model),r(e.model)})),this._disposables.push({dispose:function(){Object.keys(n._listener).forEach(function(e){n._listener[e].dispose()})}}),monaco.editor.getModels().forEach(r)}return e.prototype.dispose=function(){this._disposables.forEach(function(e){return e&&e.dispose()}),this._disposables=[]},e.prototype._doValidate=function(e,t){this._worker(e).then(function(t){return monaco.editor.getModel(e)?t.doValidation(e.toString()):null}).then(function(n){if(n){var r=n.map(function(e){return n="number"==typeof(t=e).code?String(t.code):t.code,{severity:function(e){switch(e){case o.b.Error:return monaco.MarkerSeverity.Error;case o.b.Warning:return monaco.MarkerSeverity.Warning;case o.b.Information:case o.b.Hint:default:return monaco.MarkerSeverity.Info}}(t.severity),startLineNumber:t.range.start.line,startColumn:t.range.start.character,endLineNumber:t.range.end.line,endColumn:t.range.end.character+1,message:t.message,code:n,source:t.source};var t,n});monaco.editor.setModelMarkers(monaco.editor.getModel(e),t,r)}}).done(void 0,function(e){console.error(e)})},e}();var c=function(){function e(e){this._worker=e}return Object.defineProperty(e.prototype,"triggerCharacters",{get:function(){return[":","."]},enumerable:!0,configurable:!0}),e.prototype.provideCompletionItems=function(e,t,n){var r=e.uri;return function(e,t){return e.onCancellationRequested(function(){return t.cancel()}),t}(n,this._worker(r).then(function(e){var n=function(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}(t);return n?e.doComplete(r.toString(),n):{isIncomplete:!1,items:[]}}).then(function(e){var t=e.items.map(function(e){var t={label:e.label,insertText:e.insertText,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation,detail:e.detail,kind:function(e){var t=monaco.languages.CompletionItemKind;switch(e){case o.a.Text:return t.Text;case o.a.Method:return t.Method;case o.a.Function:return t.Function;case o.a.Constructor:return t.Constructor;case o.a.Field:return t.Field;case o.a.Variable:return t.Variable;case o.a.Class:return t.Class;case o.a.Interface:return t.Interface;case o.a.Module:return t.Module;case o.a.Property:return t.Property;case o.a.Unit:return t.Unit;case o.a.Value:return t.Value;case o.a.Enum:return t.Enum;case o.a.Keyword:return t.Keyword;case o.a.Snippet:return t.Snippet;case o.a.Color:return t.Color;case o.a.File:return t.File;case o.a.Reference:return t.Reference}return t.Property}(e.kind)};return e.textEdit&&(t.range=function(e){if(e)return new i(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}(e.textEdit.range),t.insertText=e.textEdit.newText),e.insertTextFormat===o.c.Snippet&&(t.insertText={value:t.insertText}),t});return{isIncomplete:e.isIncomplete,items:t}}))},e}();function u(e){var t=new r(e),n=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.getLanguageServiceWorker.apply(t,[e].concat(n))},o=e.languageId;return monaco.languages.setMonarchTokensProvider(o,s),monaco.languages.registerCompletionItemProvider(o,new c(n)),new a(o,n),n}n.d(t,"setupMode",function(){return u})}}]);
//# sourceMappingURL=52.56a145815d15361fad29.js.map